= Asciidoctor
Dan Allen <https://github.com/mojavelinux[@mojavelinux]>; Ryan Waldron <https://github.com/erebor[@erebor]>; Sarah White <https://github.com/graphitefriction[@graphitefriction]>
:page-layout: base
:homepage-uri: http://asciidoctor.org
:docs-uri: {homepage-uri}/docs
:what-is-asciidoc-uri: {docs-uri}/what-is-asciidoc
:toolchain: {docs-uri}/install-toolchain
:install-mac: {docs-uri}/install-asciidoctor-macosx
:render: {docs-uri}/render-documents
:factory: {docs-uri}/produce-custom-themes-using-asciidoctor-stylesheet-factory
:java: {docs-uri}/install-and-use-asciidoctor-java-integration
:user-manual-uri: {docs-uri}/user-manual
:man: {homepage-uri}/man/asciidoctor
:news: {homepage-uri}/news
:docs: {homepage-uri}/docs
:org: https://github.com/asciidoctor
:sources: {org}/asciidoctor
:contributors: {sources}/graphs/contributors
:templates: {sources}/blob/master/lib/asciidoctor/backends
:tests: {sources}/tree/master/test
:issues: {sources}/issues
:sources-master-uri: {sources}/blob/master
:screenshot-uri: screenshot.png
:changelog: {sources-master-uri}/CHANGELOG.adoc
:contributing: {sources-master-uri}/CONTRIBUTING.adoc
:license: {sources}/blob/master/LICENSE
:forum: http://discuss.asciidoctor.org
:irc: irc://irc.freenode.org/#asciidoctor
:asciidoc: http://asciidoc.org
:gem: http://rubygems.org/gems/asciidoctor
:gitscm-next: https://github.com/github/gitscm-next
:seed-contribution: https://github.com/github/gitscm-next/commits/master/lib/asciidoc.rb
:tilt: https://github.com/rtomayko/tilt
:freesoftware: http://www.gnu.org/philosophy/free-sw.html
:asciidoctorj-uri: {org}/asciidoctorj
:asciidoctorjs-uri: {org}/asciidoctor.js
:idprefix:
:idseparator: -
:source-language: ruby
:language: {source-language}

{homepage-uri}[Asciidoctor] is a fast text processor and publishing toolchain for converting {what-is-asciidoc-uri}[AsciiDoc] content into HTML 5, DocBook 5 (or 4.5) and custom output formats.
Asciidoctor is written in Ruby, packaged as a RubyGem and published to {gem}[RubyGems.org].
It's also packaged in several major Linux distributions, including Fedora, Debian and Ubuntu.
Asciidoctor is open source, {sources}[hosted on GitHub] and released under the MIT license.

TIP: If you want to run Asciidoctor on the JVM or invoke its APIs from Java or other JVM languages, check out {asciidoctorj-uri}[AsciidoctorJ].
Asciidoctor is also transcoded into JavaScript (using cross-compilation) to become {asciidoctorjs-uri}[Asciidoctor.js], which allows you to run it in the browser or on Node.js.

ifdef::env-github[]
*Project health:* image:https://travis-ci.org/asciidoctor/asciidoctor.png?branch=master[Build Status, link="https://travis-ci.org/asciidoctor/asciidoctor"]
endif::env-github[]

image::{screenshot-uri}[A screenshot of the Asciidoctor README in HTML]

== AsciiDoc Processing

Asciidoctor reads and parses text formatted as AsciiDoc, then feeds the parse tree into a set of built-in templates to produce HTML 5, DocBook 5 or DocBook 4.5.
You have the option of using your own templates to customize the generated output or to convert AsciiDoc into other formats.

NOTE: Asciidoctor is a drop-in replacement for the original AsciiDoc Python processor.
The project has > 1,500 tests to ensure compatibility with the AsciiDoc syntax.

You can always get the latest source code from the {sources}[Asciidoctor git repository] on GitHub.

== Requirements

Asciidoctor works on Linux, OSX (Mac) and Windows and requires one of the following implementations of Ruby:

* Ruby 1.8.7 - 2.1.2
* JRuby 1.7 (Ruby 1.8 and 1.9 modes)
* Rubinius 2.1.1
* Opal (JavaScript)

We welcome your help testing Asciidoctor on other platforms as well.
Refer to {contributing}[Contributing] to learn how to get involved.

// QUESTION What is considered configuration information?

// QUESTION What about other sub-projects of Asciidoctor that require Tilt?

// TODO fill in this section and enable
//== List of files/directory structure
//
//Optional depending on the complexity of the project

//The latest source code is located in the {sources}[Asciidoctor git repository] on GitHub.

== Installation

Asciidoctor can be installed via the +gem+ command, bundler, or popular Linux package managers.

NOTE: The benefit of installing the gem via Linux package managers is that they will also install Ruby and RubyGems if they are not already on your machine.
The downside is that Linux package will not be available right away after a release of the RubyGem.
It may take several weeks before the packages become available for a new release.
If you need the latest version immediately, use the +gem install+ option.

=== gem install

. Open a terminal and type the +gem+ command

 $ gem install asciidoctor

=== bundle install (Bundler)

. Open your system Gemfile
. Add the +asciidoctor+ gem to your Gemfile using the following text
+
[source]
source 'https://rubygems.org'
gem 'asciidoctor'

. Save the Gemfile
. Open a terminal and install the +gem+ with bundler

 $ bundle install

=== yum install (Fedora 18 or greater)

. Open a terminal and type the +yum+ command

 $ sudo yum install rubygem-asciidoctor

=== apt-get install (Debian Sid, Ubuntu Saucy or greater)

. Open a terminal and type the +apt-get+ command

 $ sudo apt-get install asciidoctor

=== Other installation options

* {toolchain}[Installing the Asciidoctor toolchain]
* {install-mac}[Installing Asciidoctor on Mac OS X]

=== Upgrading

If you have an earlier version of Asciidoctor installed, you can update it using the +gem+ command:

 $ gem update asciidoctor

[TIP]
--
If you accidentally use +gem install+ instead of +gem update+ then you will have both versions installed.
If you wish to remove the older version use the +gem+ command:

 $ gem cleanup asciidoctor
--

On Fedora, you can update it using:

 $ sudo yum update rubygem-asciidoctor

TIP: Your Fedora system may be configured to automatically update packages, in which case no further action is required by you.
Refer to the http://docs.fedoraproject.org[Fedora docs] if you are unsure.

On Debian or Ubuntu, you can update it using:

 $ sudo apt-get upgrade asciidoctor

== Usage

If the Asciidoctor gem installed successfully, the +asciidoctor+ command line interface (CLI) will be available on your PATH.
To invoke it, execute:

 $ asciidoctor --version

In the console, you should see:

 Asciidoctor 1.5.0 [http://asciidoctor.org]

In addition to the CLI, Asciidoctor provides a Ruby API.
The API is intended for integration with other software projects and is suitable for server-side applications, such as Rails, Sinatra and GitHub.

TIP: Asciidoctor also has a Java API that mirrors the Ruby API.
The Java API calls through to the Ruby API using an embedded JRuby runtime.
See the {java}[Asciidoctor Java integration project] for more information.

=== Command line interface (CLI)

The following command will use the built-in defaults for options and create a new file in the same directory as the input file, with the same base name, but with the +.html+ extension:

 $ asciidoctor [asciidoc-file]

There are many other options available and full help is provided via:

 $ asciidoctor --help

or in the {man}[man page].

There is also an +asciidoctor-safe+ command, which turns on safe mode by default, preventing access to files outside the parent directory of the source file.
This mode is very similar to the safe mode of +asciidoc.py+.

Additional documentation:

* {render}[How do I convert a document?]
* {factory}[How do I use the Asciidoctor stylesheet factory to produce custom themes?]

=== Ruby API

To use Asciidoctor in your application, you first need to require the gem:

[source]
require 'asciidoctor'

With that in place, you can start processing AsciiDoc documents.

==== Loading a document

To parse a file into an +Asciidoctor::Document+ object:

[source]
doc = Asciidoctor.load_file 'sample.adoc'

You can get information about the document:

[source]
require 'pp'
puts doc.doctitle
puts doc.attributes

More than likely, you will want to convert the document.

==== Converting files

To convert a file containing AsciiDoc markup to HTML 5, use:

[source]
Asciidoctor.render_file 'sample.adoc', :in_place => true

The command will output to the file +sample.html+ in the same directory.

You can convert the file to DocBook 4.5 by setting the +:backend+ option to +:docbook+:

[source]
Asciidoctor.render_file 'sample.adoc', :in_place => true, :backend => :docbook

The command will output to the file +sample.xml+ in the same directory.
(If you're on Linux, you can view the file using yelp).

==== Converting strings

To convert an AsciiDoc-formatted string:

[source]
puts Asciidoctor.render '*This* is http://asciidoc.org[AsciiDoc]!'

When converting a string, the header and footer are excluded by default to make Asciidoctor consistent with other lightweight markup engines like Markdown.
If you want the header and footer, just enable it using the +:header_footer+ option:

[source]
puts Asciidoctor.render '*This* is http://asciidoc.org[AsciiDoc]!', :header_footer => true

Now you'll get a full HTML 5 file.
If you only want the inline markup to be processed, set the +:doctype+ option to +'inline'+:

[source]
puts Asciidoctor.render '*This* is http://asciidoc.org[AsciiDoc]!', :doctype => :inline

As before, you can also produce DocBook 4.5:

[source]
puts Asciidoctor.render '*This* is http://asciidoc.org[AsciiDoc]!.', :header_footer => true,
   :backend => :docbook

If you don't like the output you see, you can change it.
Any of it!

==== Using custom templates

Let's assume you want to customize the HTML that is generated for a paragraph. First, create the file +templates/paragraph.html.slim+ with the following content:

[source, slim]
p id=@id class=role =content

Then, pass the template_dir option to the API to have Asciidoctor use this template for converting paragraph blocks in place of the built-in converter for paragraphs.

For more information, see the {user-manual-uri}[user manual].

== Contributing

In the spirit of {freesoftware}[free software], _everyone_ is encouraged to help improve this project.
If you discover errors or ommisions in the source code, documentation, or website content, please don't hesitate to submit an issue or open a pull request with a fix.
New contributors are always welcome!

Here are some ways *you* can contribute:

* by using alpha, beta, and prerelease versions
* by reporting bugs
* by suggesting new features
* by writing or editing documentation
* by writing specifications
* by writing code -- _No patch is too small._
** fix typos
** add comments
** clean up inconsistent whitespace
** write tests!
* by refactoring code
* by fixing {issues}[issues]
* by reviewing patches

The {contributing}[Contributing] guide provides information on how to create, style, and submit issues, feature requests, code, and documentation to the Asciidoctor Project.

== Getting Help

The Asciidoctor project is developed to help you sucessfully write and publish your content.
But we can't do that without your feedback!
We encourage you to ask questions and discuss any aspects of the project on the mailing list or IRC.

Mailing list:: {forum}
Chat:: {irc}[#asciidoctor] on FreeNode IRC

Further information and documentation about Asciidoctor can be found on the project's website.

Home:: {homepage-uri}
News:: {news}
Docs:: {docs}

The Asciidoctor organization on GitHub hosts the project's source code, issue tracker, and sub-projects.

Source repository (git):: {sources}
Issue tracker (GitHub):: {issues}
Asciidoctor organization (GitHub):: {org}

== Copyright and Licensing

Copyright (C) 2012-2014 Dan Allen and Ryan Waldron.
Free use of this software is granted under the terms of the MIT License.

See the {license}[LICENSE] file for details.

== Authors

*Asciidoctor* is lead by https://github.com/mojavelinux[Dan Allen] and https://github.com/graphitefriction[Sarah White] and has received contributions from {contributors}[many other individuals] in the Asciidoctor community.
The project was initiated in 2012 by https://github.com/erebor[Ryan Waldron] and based on {seed-contribution}[a prototype] written by https://github.com/nickh[Nick Hengeveld].

*AsciiDoc* was started by Stuart Rackham and has received contributions from many other individuals in the AsciiDoc community.

// TODO fill in this section and enable
//== Thanks, acknowledgements, and credits

== Changelog

=== v0.1.4 (2013-09-05) - @mojavelinux

Performance::

  * 15% increase in speed compared to 0.1.3

Enhancements::

  * updated xref inline macro to support inter-document references (#417)
  * added extension API for document processing (#79)
  * added include directive processor extension (#100)
  * added id and role shorthand for formatted (quoted) text (#517)
  * added shorthand syntax for specifying block options (#481)
  * added support for checklists in unordered list (#200)
  * added support for inline style for unordered lists (#620)
  * added DocBook 5 backend (#411)
  * added docinfo option for footer (#486)
  * added Pygments as source highlighter option (pygments) (#538)
  * added icon inline macro (#529)
  * recognize implicit table header row (#387)
  * uri can be used in inline image (#470)
  * add float attribute to inline image (#616)
  * allow role to be specified on text enclosed in backticks (#419)
  * added XML comment-style callouts for use in XML listings (#582)
  * made callout bullets non-selectable in HTML output (#478)
  * pre-wrap literal blocks, added nowrap option to listing blocks (#303)
  * skip (retain) missing attribute references by default (#523)
  * added attribute-missing attribute to control how a missing attribute is handled (#495)
  * added attribute-undefined attribute to control how an undefined attribute is handled (#495)
  * permit !name syntax for undefining attribute (#498)
  * ignore front matter used by static site generators if skip-front-matter attribute is set (#502)
  * sanitize contents of HTML title element in html5 backend (#504)
  * support toc position for toc2 (#467)
  * cli accepts multiple files as input (@lordofthejars) (#227)
  * added Markdown-style horizontal rules and pass Markdown tests (#455)
  * added float clearing classes (.clearfix, .float-group) (#602)
  * don't disable syntax highlighting when explicit subs is used on listing block
  * asciidoctor package now available in Debian Sid and Ubuntu Saucy (@avtobiff) (#216)

Compliance::

  * embed CSS by default, copy stylesheet when linkcss is set unless copycss! is set (#428)
  * refactor reader to track include stack (#572)
  * made include directive resolve relative to current file (#572)
  * track include stack to enforce maximum depth (#581)
  * fixed greedy comment blocks and paragraphs (#546)
  * enable toc and numbered by default in DocBook backend (#540)
  * ignore comment lines when matching labeled list item (#524)
  * correctly parse footnotes that contain a URL (#506)
  * parse manpage metadata, output manpage-specific HTML, set docname and outfilesuffix (#488, #489)
  * recognize preprocessor directives on first line of AsciiDoc table cell (#453)
  * include directive can retrieve data from uri if allow-uri-read attribute is set (#445)
  * support escaping attribute list that precedes formatted (quoted) text (#421)
  * made improvements to list processing (#472, #469, #364)
  * support percentage for column widths (#465)
  * substitute attributes in docinfo files (#403)
  * numbering no longer increments on unnumbered sections (#393)
  * fixed false detection of list item with hyphen marker
  * skip include directives when processing comment blocks
  * added xmlns to root element in docbook45 backend, set noxmlns attribute to disable
  * added a Compliance module to control compliance-related behavior
  * added linkattrs feature to AsciiDoc compatibility file (#441)
  * added level-5 heading to AsciiDoc compatibility file (#388)
  * added new XML-based callouts to AsciiDoc compatibility file
  * added absolute and uri image target matching to AsciiDoc compatibility file
  * added float attribute on inline image macro to AsciiDoc compatibility file
  * removed linkcss in AsciiDoc compatibility file
  * fixed fenced code entry in compatibility file

Bug Fixes::

  * lowercase attribute names passed to API (#508)
  * numbered can still be toggled even when enabled in API (#393)
  * allow JRuby Map as attributes (#396)
  * don't attempt to highlight callouts when using CodeRay and Pygments (#534)
  * correctly calculate line length in Ruby 1.8 (#167)
  * write to specified outfile even when input is stdin (#500)
  * only split quote attribution on first comma in Markdown blockquotes (#389)
  * don't attempt to print render times when doc is not rendered
  * don't recognize line with four backticks as a fenced code block (#611)

Improvements::

  * upgraded Font Awesome to 3.2.1 (#451)
  * improved the built-in CodeRay theme to match Asciidoctor styles
  * link to CodeRay stylesheet if linkcss is set (#381)
  * style the video block (title & margin) (#590)
  * added Groovy, Clojure, Python and YAML to floating language hint
  * only process callouts for blocks in which callouts are found
  * added content_model to AbstractBlock, rename buffer to lines
  * use Untitled as document title in rendered output if document has no title
  * rename include-depth attribute to max-include-depth, set 64 as default value (#591)
  * the tag attribute can be used on the include directive to identify a single tagged region
  * output multiple authors in HTML backend (#399)
  * allow multiple template directories to be specified, document in usage and manpage (#437)
  * added option to cli to specify template engine (#406)
  * added support for external video hosting services in video block macro (@xcoulon) (#587)
  * strip leading separator(s) on section id if idprefix is blank (#551)
  * customized styling of toc placed inside body content (#507)
  * consolidate toc attribute so toc with or without toc-position can make sidebar toc (#618)
  * properly style floating images (inline & block) (#460)
  * add float attribute to inline images (#616)
  * use ul list for TOC in HTML5 backend (#431)
  * support multiple terms per labeled list item in model (#532)
  * added role?, has_role?, option? and roles methods to AbstractNode (#423, 474)
  * added captioned_title method to AbstractBlock
  * honor showtitle attribute as alternate to notitle! (#457)
  * strip leading indent from literal paragraph blocks assigned the style normal
  * only process lines in AsciiDoc files
  * emit message that tilt gem is required to use custom backends if missing (#433)
  * use attributes for version and last updated messages in footer (#596)
  * added a basic template cache (#438)
  * include line info in several of the warnings (for lists and tables)
  * print warning/error messages using warn (#556)
  * lines are not preprocessed when peeking ahead for section underline
  * introduced Cursor object to track line info
  * fixed table valign classes, no underline on image link
  * removed dependency on pending library, lock Nokogiri version to 1.5.10
  * removed require rubygems line in asciidoctor.rb, add to cli if RUBY_VERSION < 1.9
  * added tests for custom backends
  * added test that shorthand doesn't clobber explicit options (#481)
  * removed unnecessary monospace class from literal and listing blocks

See the {changelog}[CHANGELOG.adoc] file for a list of changes in older releases as well as for the upcoming release.
